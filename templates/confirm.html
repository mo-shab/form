<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirm Your Information</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            width: 50%;
            margin: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .button-container {
            text-align: center;
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Confirm Your Information</h1>
        <form id="confirmationForm" action="/confirm" method="post">
            <table>
                <tr>
                    <th></th>
                    <th>Informations</th>
                </tr>
                <tr>
                    <td>JLPT Level</td>
                    <td>{{ form_data['jlpt_level'] }}</td>
                </tr>
                
                <tr>
                    <td>Test Center</td>
                    <td>{{ form_data['test_center'] }}</td>
                    <input type="hidden" name="{{ key }}" value="{{ value }}">
                </tr>
                
                <tr>
                    <td> Full Name</td>
                    <td>{{ form_data['full_name'] }}</td>
                </tr>
                
                <tr>
                    <td> Gender</td>
                    <td> {{ form_data['gender'] }}</td>  
                </tr>

                <tr>
                    <td> Date of Birth</td>
                    <td> {{ form_data['dob_year'] }}-{{ form_data['dob_month'] }}-{{ form_data['dob_day'] }}</td>
                </tr>
                
                <tr>
                    <td>8 Digit Pascode</td>
                    <td> {{ form_data['pass_code']}} </td>
                </tr>

                <tr>
                    <td>Native Language.</td>
                    <td> {{ form_data['native_language'] }}</td>
                </tr>

                <tr>
                    <td>Nationality.</td>
                    <td> {{ form_data['nationality'] }}</td>
                </tr>

                <tr>
                    <td>Address</td>
                    <td> {{ form_data['adress'] }}</td>
                </tr>

                <tr>
                    <td>Country</td>
                    <td> {{form_data['country']}} </td>
                </tr>

                <tr>
                    <td>ZIP Code</td>
                    <td>{{form_data['zip_code']}}</td>
                </tr>

                <tr>
                    <td>Phone Number</td>
                    <td>{{form_data['phone_number']}}</td>
                </tr>

                <tr>
                    <td>Email</td>
                    <td>{{form_data['email']}}</td>
                </tr>
            </table>
            <div class="button-container">
                <button type="submit" onclick="generatePDF()">Confirm</button>
                <button type="button" onclick="window.history.back()">Edit</button>
            </div>
        </form>
    </div>

    <script>
        function generatePDF() {
        // Select the container element that holds the content to be converted into PDF
        var element = document.querySelector('.container');

        // Options for the PDF generation
        var opt = {
            margin:       1,
            filename:     'confirmation.pdf',
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { scale: 2 },
            jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
        };

        // Start PDF generation using html2pdf.js
        html2pdf().set(opt).from(element).save();
    }
    </script>
    
</body>
</html>
